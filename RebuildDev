pipeline {
    agent any
    stages {
        stage('Delete dev branch') {
            try {
                echo 'Deleting dev branch...'
                bat 'git push -d origin develop'
                bat 'git branch -D develop'
            } catch (ex) {
                echo 'Error occurred'
            } finally {
                echo 'Dev branch handled.'
            }
        }
        stage('Rebuild dev branch') {
            steps {
                echo 'Rebuilding dev branch...'
                bat 'git checkout staging'
                bat 'git checkout -b develop'
                bat 'git push'
            }
        }
    }
}